#!/bin/bash

set -e  # Para o script se qualquer comando falhar

TMP_DIR1="moodle_compose"
TMP_DIR2="LeadSystem"

echo "ğŸ› ï¸ Clonando moodle_compose..."
git clone git@github.com:thiago0238/moodle_compose.git $TMP_DIR1

echo "ğŸ³ Buildando imagem Docker: moodle_compose"
docker build -t thiago0238/moodle_compose:latest ./$TMP_DIR1

echo "ğŸ› ï¸ Clonando LeadSystem..."
git clone git@github.com:thiago0238/LeadSystem.git $TMP_DIR2

echo "ğŸ³ Buildando imagem Docker: LeadSystem"
docker build -t thiago0238/leadsystem:latest ./$TMP_DIR2

echo "ğŸ§¹ Limpando diretÃ³rios temporÃ¡rios..."
rm -rf $TMP_DIR1 $TMP_DIR2

# Caminho para o docker-compose.yml
COMPOSE_DIR="./moodle_compose" # Altere se estiver em outro lugar

echo "ğŸš€ Subindo containers com docker-compose..."
cd $COMPOSE_DIR
docker compose up -d

echo "âœ… Tudo finalizado com sucesso!"
